---
title: useCopyToClipboard
visibility: public
---

# What & Why?
Copying text to clipboard is important

# Code
```typescript
export const useCopyToClipboard = (
  text: string,
  options: {
    timeout?: number;
    successMessage?: string;
    errorMessage?: string;
  } = {},
) => {
  const {
    timeout = 2000,
    successMessage = 'Copied to clipboard',
    errorMessage = 'Failed to copy to clipboard',
  } = options;
  const [isCopied, setIsCopied] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const timeoutRef = useRef<NodeJS.Timeout | null>(null);

  useEffect(() => {
    return () => {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, []);

  const handleCopy = useCallback(async () => {
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }

    setError(null);

    try {
      if (!navigator.clipboard) {
        throw new Error('Clipboard API not supported');
      }

      await navigator.clipboard.writeText(text);
      toast.success(successMessage ?? 'Copied to clipboard');
      setIsCopied(true);

      // Set timeout to reset copied state
      timeoutRef.current = setTimeout(() => {
        setIsCopied(false);
      }, timeout);

      return true;
    } catch (err) {
      toast.error(errorMessage ?? 'Failed to copy to clipboard');
      const error =
        err instanceof Error ? err.message : 'Failed to copy to clipboard';
      setError(error);
      setIsCopied(false);
      return false;
    }
  }, [text, timeout, successMessage, errorMessage]);

  return {
    isCopied,
    error,
    handleCopy,
  };
};
```